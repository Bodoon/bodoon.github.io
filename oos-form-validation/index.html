<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>OSS Form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/css/bootstrap.css" />
    <style>
        label {
            width: 100px;
        }

        label.error {
            color: red;
        }

        input {
            border: 1px solid #ccc;
        }

        input.error {
            border-color: red;
        }

        .content {
            padding: 15px;
            border: 1px solid #ccc;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="content">
                    <form onsubmit="return myForm()" id="testForm">
                        <div>
                            <label for="firstName">First name</label>
                            <input type="text" id="firstName" />
                            <span></span>
                        </div>

                        <div>
                            <label for="lastName">Last name</label>
                            <input type="text" id="lastName" />
                            <span></span>
                        </div>

                        <div>
                            <label for="email">Email</label>
                            <input type="text" id="email" />
                            <span></span>
                        </div>

                        <button type="submit" >Send</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        function myForm() {
            var message,

                firstName = document.getElementById('firstName'),
                lastName = document.getElementById('lastName'),
                email = document.getElementById('email'),

                firstNameVal = document.getElementById('firstName').value,
                lastNameVal = document.getElementById('lastName').value,
                emailVal = document.getElementById('email').value,

                emailRegExp = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,

                //email check is separate
                fields = {
                    firstName: firstNameVal,
                    lastName: lastNameVal
                },
            
                valid = {
                    firstName: false,
                    lastName: false,
                    email: false
                };
            
            

            //check if input is not empty
            for (var i in fields) {
                if (fields[i] == "") {
                    message = i + " is required";
                    var field = document.getElementById(i);
                    field.nextElementSibling.innerHTML = message;
                    field.classList.add("error");
                    field.previousElementSibling.classList.add("error");
                    valid[i] = false;
                } else {
                    var field = document.getElementById(i);
                    field.nextElementSibling.innerHTML = "";
                    field.classList.remove("error");
                    field.previousElementSibling.classList.remove("error");
                    valid[i] = true;
                }
            }
            
            //check if email is valid
            valid.email = emailRegExp.test(emailVal);

            if (!emailRegExp.test(emailVal)) {
                email.nextElementSibling.innerHTML = "email is not valid";
                email.classList.add("error");
                email.previousElementSibling.classList.add("error");
                valid.email = false;
            }

            else {
                email.nextElementSibling.innerHTML = "";
                email.classList.remove("error");
                email.previousElementSibling.classList.remove("error");
                valid.email = true;
            }

            //check if all inputs are valid
            for (prop in valid){
                if (valid[prop] === false) {
                    return false;
                } else {
                    continue;
                }                
            }
            
            alert("Form is valid");
            return true;
        }

    </script>

</body>

</html>